---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { SITE_TITLE } from "../../consts";
import { Icon } from "astro-icon/components";

interface Position {
  startDate: string;
  endDate?: string;
  team: string;
  titles: string[];
}

interface Career {
  company: string;
  url: string;
  positions: Position[];
}

const careers: Career[] = [
  {
    company: "株式会社IVRy",
    url: "https://ivry.jp/company/",
    positions: [
      {
        startDate: "2026/01",
        team: "SRE Unit, Platform & Infrastructure Group",
        titles: ["Engineering Manager(SRE)"],
      },
      {
        startDate: "2024/10",
        endDate: "2025/12",
        team: "Platform Circle",
        titles: ["Software Engineer(SRE)","Team Lead(SRE)"],
      },
    ],
  },
  {
    company: "株式会社スリーシェイク",
    url: "https://3-shake.com/",
    positions: [
      {
        startDate: "2021/08",
        endDate: "2024/09",
        team: "Sreake事業部",
        titles: ["Group Lead(SRE Consulting / Support)"],
      },
      {
        startDate: "2020/05",
        endDate: "2024/09",
        team: "Sreake事業部",
        titles: ["IT Infrastructure Engineer(SRE Consulting / Support)"],
      },
    ],
  },
  {
    company: "株式会社ハートビーツ",
    url: "https://heartbeats.jp/",
    positions: [
      {
        startDate: "2017/06",
        endDate: "2020/04",
        team: "MSP事業部 エンジニアリンググループ",
        titles: ["IT Infrastructure Engineer"],
      },
      {
        startDate: "2016/04",
        endDate: "2017/06",
        team: "MSP事業部 運用グループ",
        titles: ["Senior Operations Engineer"],
      },
      {
        startDate: "2012/10",
        endDate: "2016/03",
        team: "MSP事業部 運用グループ",
        titles: ["Part-time Operations Engineer","Part-time Senior Operations Engineer"],
      },
    ],
  },
  {
    company: "国立大学法人電気通信大学",
    url: "https://www.uec.ac.jp/",
    positions: [
      {
        startDate: "2012/04",
        endDate: "2016/03",
        team: "情報理工学部 総合情報学科",
        titles: ["セキュリティ情報学コース(学士)"],
      },
    ],
  },
];

---

<BaseLayout title={`about - ${SITE_TITLE}`} description="about abnoumaru">
  <h2>自己紹介</h2>
  <h3>id</h3>
  <p>abnoumaru(あぶのうまる)</p>

  <h3>アイコン</h3>
  <div class="icon-gallery">
    <img src="/icon/abnoumaru.jpg" alt="仕事などでも使えるアイコン、SHIROBAKOのアリアが歯磨きしているシーンを意識した絵" />
    <img src="/icon/abnoumaru-public.jpg" alt="これはかなりプライベートなアカウントだよを伝えたいときのアイコン" />
    <img src="/icon/abnoumaru-photo-of-the-author.webp" alt="2025年11月にキャッチボールをしてる著者" />
    <img src="/icon/abnoumaru-omoide.webp" alt="前々職の旅行で行った好きな写真" />
  </div>

  <h3>経歴</h3>
  {
    careers.map((career) => (
      <div class="career-block">
        <div class="company-header">
          <a href={career.url} target="_blank" rel="noopener noreferrer">
            {career.company}
          </a>
        </div>
        <div class="positions">
          {career.positions.map((pos) => (
            <div class="position-item">
              <div class="position-header">
                <span class="position-period">{pos.startDate} - {pos.endDate || "現在"}</span>
                <span class="position-team">{pos.team}</span>
              </div>
              <div class="position-details">
                {pos.titles.map((title) => (
                  <div class="detail-row">{title}</div>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>
    ))
  }

  <h3>連絡先</h3>
  <div class="contacts">
    <p>
      <Icon name="simple-icons:discord" />
      <span>abnoumaru</span>
    </p>
    <p>
      <Icon name="lucide:mail" />
      <span>me [at] abnoumaru [dot] com</span>
    </p>
  </div>

</BaseLayout>

<style>
  .bio {
    font-style: italic;
    color: #555;
    margin: 1.5rem 0 0 0;
    text-align: left;
  }
  .lyric-source {
    font-size: 0.8rem;
    color: #888;
    text-align: left;
    margin-top: 0.5rem;
    margin-bottom: 2.5rem;
  }
  .icon-gallery {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-top: 1rem;
  }
  .icon-gallery img {
    width: 100px;
    height: 100px;
    object-fit: cover;
  }
  .career-block {
    margin-bottom: 1.5rem;
  }
  .company-header {
    margin-bottom: 0.5rem;
  }
  .company-header a {
    color: #111;
    text-decoration: underline;
  }
  .positions {
    margin-left: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .position-item {
    display: block;
  }
  .position-header {
    display: flex;
    gap: 1rem;
  }
  .position-period {
    color: #111;
    font-variant-numeric: tabular-nums;
    white-space: nowrap;
    min-width: 10rem;
    flex-shrink: 0;
  }
  .position-team {
    color: #111;
  }
  .position-details {
    margin-left: calc(10rem + 1rem);
  }
  .detail-row {
    color: #666;
    font-size: 0.9rem;
    margin-bottom: 0.125rem;
  }

  .contacts {
    flex-direction: column;
    align-items: flex-start;
  }

  .contacts p {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin: 0;
  }
</style>
